{"version":3,"sources":["pages/forms/AddProduct.js","components/UI/Title.js","redux/actions/products.js"],"names":["AddProduct","dispatch","useDispatch","isWaitingResponce","useSelector","products","useState","productURL","setProductURL","productId","setProductId","useEffect","match","text","className","onInput","e","target","value","onProductInput","type","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onClick","addProduct","Title","fetchProducts","withoutCategory","payload","getProductsWithoutCategory","then","data","setProducts","getProducts","addProductById","enqueueNotification","error","finally","items","setProductsSearchTerm","searchTeam"],"mappings":"2NAKe,SAASA,IACtB,IAAMC,EAAWC,cACXC,EAAoBC,aACxB,qBAAGC,SAAwBF,qBAHM,EAKCG,mBAAS,IALV,mBAK5BC,EAL4B,KAKhBC,EALgB,OAMDF,mBAAS,IANR,mBAM5BG,EAN4B,KAMjBC,EANiB,KAQnCC,qBACE,kBACED,EACEH,EAAWK,MAAM,UAAYL,EAAWK,MAAM,UAAU,GAAK,MAEjE,CAACL,IAWH,OACE,gCACE,cAAC,IAAD,CAAOM,KAAK,sGACZ,qBAAKC,UAAU,OAAf,SACE,sBAAKA,UAAU,SAAf,UACE,mBAAGA,UAAU,UAAb,+FACA,uBACEC,QAAS,SAACC,GAAD,OAfI,SAACA,GACtBR,EAAcQ,EAAEC,OAAOC,OAcCC,CAAeH,IAC/BE,MAAOX,EACPa,KAAK,OACLN,UAAU,wJAKhB,qBAAKA,UAAU,0CAAf,SACGX,EACC,yBACEkB,UAAQ,EACRP,UAAU,gQAFZ,UAIE,sBACEA,UAAU,uCACVQ,MAAM,6BACNC,KAAK,OACLC,QAAQ,YAJV,UAME,wBACEV,UAAU,aACVW,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPC,YAAY,MAEd,sBACEf,UAAU,aACVS,KAAK,eACLO,EAAE,uHArBR,4DA2BA,wBACET,UAAWZ,EACXsB,QAAS,WAjDjB9B,EAAS+B,YAAWvB,KAkDZK,UAAU,gQAHZ,2E,6ECzEK,SAASmB,EAAT,GAA0B,IAATpB,EAAQ,EAARA,KAC9B,OAAO,oBAAIC,UAAU,qCAAd,SAAoDD,M,gCCD7D,0HAYaqB,EACX,eAACC,EAAD,+DACA,SAAClC,GACCA,EAAS,CACPmB,KAAM,aACNgB,SAAS,IAGPD,EACFE,cAA6BC,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACnCtC,EAASuC,EAAYD,OAGvBE,cAAcH,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACpBtC,EAASuC,EAAYD,SAKhBP,EAAa,SAACvB,GAAD,OAAe,SAACR,GACxCA,EAAS,CACPmB,KAAM,cACNgB,SAAS,IAGXM,YAAejC,GACZ6B,MACC,kBAAMrC,EAAS0C,YAAoB,6HAA0B,eAC7D,SAACC,GAAD,OACE3C,EACE0C,YACE,4VACA,aAIPE,SAAQ,WACP5C,EAAS,CACPmB,KAAM,cACNgB,SAAS,SAKJI,EAAc,SAACM,GAAD,MAAY,CACrC1B,KAAM,eACNgB,QAASU,IAGEC,EAAwB,SAACC,GAAD,MAAiB,CACpD5B,KAAM,2BACNgB,QAASY","file":"static/js/8.e6924918.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Title from '../../components/UI/Title';\nimport { addProduct } from '../../redux/actions/products';\n\nexport default function AddProduct() {\n  const dispatch = useDispatch();\n  const isWaitingResponce = useSelector(\n    ({ products }) => products.isWaitingResponce\n  );\n  const [productURL, setProductURL] = useState('');\n  const [productId, setProductId] = useState('');\n\n  useEffect(\n    () =>\n      setProductId(\n        productURL.match(/\\d{6,}/) ? productURL.match(/\\d{6,}/)[0] : ''\n      ),\n    [productURL]\n  );\n\n  const onProductInput = (e) => {\n    setProductURL(e.target.value);\n  };\n\n  const onClickSubmit = () => {\n    dispatch(addProduct(productId));\n  };\n\n  return (\n    <div>\n      <Title text=\"Добавление товара\" />\n      <div className=\"mb-4\">\n        <div className=\"flex-1\">\n          <p className=\"text-lg\">Ссылка на товар:</p>\n          <input\n            onInput={(e) => onProductInput(e)}\n            value={productURL}\n            type=\"text\"\n            className=\"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n          />\n        </div>\n      </div>\n\n      <div className=\"px-4 py-3 bg-gray-50 text-right sm:px-6\">\n        {isWaitingResponce ? (\n          <button\n            disabled\n            className=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-500 disabled:opacity-40 hover:bg-opacity-75 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n          >\n            <svg\n              className=\"animate-spin mr-2 h-5 w-5 text-white\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                className=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                strokeWidth=\"4\"\n              ></circle>\n              <path\n                className=\"opacity-75\"\n                fill=\"currentColor\"\n                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              ></path>\n            </svg>\n            Сохранить\n          </button>\n        ) : (\n          <button\n            disabled={!productId}\n            onClick={() => onClickSubmit()}\n            className=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-500 disabled:opacity-40 hover:bg-opacity-75 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n          >\n            Сохранить\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","export default function Title({ text }) {\n  return <h1 className=\"text-3xl font-bold mb-3 opacity-75\">{text}</h1>;\n}\n","import {\n  getProductsWithoutCategory,\n  addProductById,\n  getProducts,\n} from '../../utils/API';\nimport { enqueueNotification } from './notifications';\n\nexport const setLoaded = (payload) => ({\n  type: 'SET_LOADED',\n  payload,\n});\n\nexport const fetchProducts =\n  (withoutCategory = false) =>\n  (dispatch) => {\n    dispatch({\n      type: 'SET_LOADED',\n      payload: false,\n    });\n\n    if (withoutCategory) {\n      getProductsWithoutCategory().then(({ data }) => {\n        dispatch(setProducts(data));\n      });\n    } else {\n      getProducts().then(({ data }) => {\n        dispatch(setProducts(data));\n      });\n    }\n  };\n\nexport const addProduct = (productId) => (dispatch) => {\n  dispatch({\n    type: 'SET_WAITING',\n    payload: true,\n  });\n\n  addProductById(productId)\n    .then(\n      () => dispatch(enqueueNotification('Товар успешно добавлен', 'success')),\n      (error) =>\n        dispatch(\n          enqueueNotification(\n            'Возникла проблема при добавлении товара, возможно он уже добавлен',\n            'error'\n          )\n        )\n    )\n    .finally(() => {\n      dispatch({\n        type: 'SET_WAITING',\n        payload: false,\n      });\n    });\n};\n\nexport const setProducts = (items) => ({\n  type: 'SET_PRODUCTS',\n  payload: items,\n});\n\nexport const setProductsSearchTerm = (searchTeam) => ({\n  type: 'SET_PRODUCTS_SEARCH_TERM',\n  payload: searchTeam,\n});\n"],"sourceRoot":""}